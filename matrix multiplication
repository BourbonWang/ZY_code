#include<stdio.h>
#pragma warning(disable:4996)
#include<stdlib.h>
int main()
{
	int a[20][20] = { 0 }, b[20][20] = { 0 }, c[20][20] = { 0 }, ra[2] = { 0 }, rb[2] = { 0 };
	void load(int a[20][20],int ra[2],FILE *in);
	void output(int a[20][20], int x, int y);
	void cheng(int a[20][20], int b[20][20], int c[20][20]);
	FILE *ina,*inb;
	ina = fopen("A.txt", "r");
	inb = fopen("B.txt", "r");
	load(a, ra,ina);
	load(b, rb,inb);
	if (ra[0] != rb[1])
	{
		printf("error\n");
		return;
	}
	cheng(a, b, c);
	output(c, ra[1], rb[0]);
	system("pause");
	return 0;
}

void load(int a[20][20],int r[2],FILE *in)
{
	int i, j;
	for (i = 0;; i++)
	{
		for (j = 0;; j++)
		{
			if(fscanf(in, "%d", &a[i][j])<=0) break;
			if (fgetc(in) == '\n') break;
		}
		if(r[0]==0) r[0] = j;
		if (j == 0) {
			r[1] = i - 1;
			break;
		}
	}
	fclose(in);
	return ;
}

void output(int a[20][20],int x,int y)
{
	FILE *out;
	out = fopen("C.txt", "w");
	int i, j;
	for (i = 0; i <=x ; i++)
	{
		for (j = 0; j <= y; j++)
		{
			fprintf(out, "%d ", a[i][j]);
			printf("%d ", a[i][j]);
		}
		fprintf(out, "\n");
		printf("\n");
	}
	fclose(out);
}

void cheng(int a[20][20],int b[20][20],int c[20][20])
{
	int i, j, k,sum=0;
	for (i = 0; i < 20; i++)
		for(k=0;k<20;k++)
		for (j = 0; j < 20; j++)
			c[i][k]+=a[i][j] * b[j][k];
	return;
}
